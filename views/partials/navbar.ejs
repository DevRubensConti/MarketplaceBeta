<head>
  <link rel="stylesheet" href="/css/navbar.css">
</head>

<nav class="navbar">
  <div class="navbar-top">
    <div class="logo">
      <a href="/"><img src="/images/logo.png" height="60px" width="60px" alt="Logo"></a>
    </div>

    <div class="nav-links">
      <a href="/lojas">Lojas</a>
      <a href="#">Sobre Nós</a>
      <a href="#">Mapa</a>
    </div>

    <form class="search-bar" action="/produtos" method="GET">
      <input type="text" name="pesquisa" placeholder="Buscar produtos..." required>
      <button type="submit">
        <img src="/images/search-icon.png" alt="Buscar" height="20px" width="20px">
      </button>
    </form>

    <div class="nav-links">
      <a href="/">Início</a>
      <a href="#">Carrinho</a>

      <% if (usuario) { %>
        <% 
          const iconePadrao = usuario.tipo === 'pj' 
            ? '/images/store_logos/store.png' 
            : '/images/user_default.png';
          const iconePerfil = usuario.icone_url || iconePadrao;
        %>
        <div class="loja-dropdown">
          <img src="<%= iconePerfil %>" alt="Perfil" class="icone-perfil" id="iconeLoja">

          <div class="dropdown-conteudo" id="dropdownMenu">
            <% if (usuario.tipo === 'pj') { %>
              <a href="/painel/loja">Painel da Loja</a>
              <a href="/loja/<%= usuario.id %>">Ver Loja Pública</a>
              <a href="/cadastro-item">Novo Produto</a>
            <% } else { %>
              <a href="/painel/usuario">Painel do Usuário</a>
              <a href="/usuario/<%= usuario.id %>">Ver Perfil Público</a>
            <% } %>
            <a href="/logout">Sair</a>
          </div>
        </div>
      <% } else { %>
        <a href="/login">Entrar</a>
        <a href="/signup" class="signup">Cadastre-se</a>
      <% } %>
    </div>

  </div>
</nav>

<nav class="navbar-2">
  <div class="navbar-bottom">
    <a href="#" id="btn-corda">Instrumentos de Corda</a>
    <a href="#" onclick="alert('Em breve!')">Percussão</a>
    <a href="#" onclick="alert('Em breve!')">Teclados e Pianos</a>
    <a href="#" onclick="alert('Em breve!')">Sopro</a>
    <a href="#" onclick="alert('Em breve!')">Áudio</a>
    <a href="#" onclick="alert('Em breve!')">Acessórios</a>
    <a class="sell-now" href="/cadastro-item">VENDA AGORA!</a>
    <a href="#">Ajuda</a>
    <a href="#">Sobre o Marketplace</a>
  </div>

  <div id="painel-filtro" class="painel-filtro">
    <div class="painel-conteudo">
      <span class="fechar-filtro">&times;</span>
      <a>Instrumentos de Corda</a>
      <div class="grid-categorias">
        <!-- Coluna 1 -->
        <div class="coluna">
          <h3>Guitarras Elétricas</h3>
          <ul>
            <li><a href="/produtos?modelo[]=Stratocaster">Stratocaster</a></li>
            <li><a href="/produtos?modelo[]=Telecaster">Telecaster</a></li>
            <li><a href="/produtos?modelo[]=Les Paul">Les Paul</a></li>
            <li><a href="/produtos?modelo[]=SG">SG</a></li>
            <li><a href="/produtos?modelo[]=Explorer">Explorer</a></li>
            <li><a href="/produtos?modelo[]=Flying V">Flying V</a></li>
          </ul>

          <h3>Baixos</h3>
          <ul>
            <li><a href="/produtos?categoria=baixo4cordas">4 Cordas</a></li>
            <li><a href="/produtos?categoria=baixo5cordas">5 Cordas</a></li>
            <li><a href="/produtos?categoria=ativos">Ativos</a></li>
            <li><a href="/produtos?categoria=passivos">Passivos</a></li>
            <li><a href="/produtos?categoria=canhoto">Canhoto</a></li>
            <li><a href="/produtos?categoria=acustico">Acústico</a></li>
          </ul>
        </div>

        <!-- Coluna 2 -->
        <div class="coluna">
          <h3>Violões</h3>
          <ul>
            <li><a href="/produtos?categoria=classico">Clássico (Nylon)</a></li>
            <li><a href="/produtos?categoria=folk">Folk (Aço)</a></li>
            <li><a href="/produtos?categoria=eletroacustico">Eletroacústico</a></li>
            <li><a href="/produtos?categoria=cutaway">Cutaway</a></li>
            <li><a href="/produtos?categoria=flat">Flat</a></li>
            <li><a href="/produtos?categoria=mini">Mini/Viagem</a></li>
            <li><a href="/produtos?categoria=12cordas">12 Cordas</a></li>
            <li><a href="/produtos?categoria=canhoto">Canhoto</a></li>
            <li><a href="/produtos?categoria=iniciantes">Para Iniciantes</a></li>
          </ul>
        </div>

        <!-- Coluna 3 -->
        <div class="coluna">
          <h3>Acessórios e Peças</h3>
          <ul>
            <li><a href="/produtos?categoria=cordas">Cordas</a></li>
            <li><a href="/produtos?categoria=captadores">Captadores</a></li>
            <li><a href="/produtos?categoria=afinadores">Afinadores</a></li>
            <li><a href="/produtos?categoria=correias">Correias</a></li>
            <li><a href="/produtos?categoria=pedais">Pedais</a></li>
            <li><a href="/produtos?categoria=capotrastes">Capotrastes</a></li>
            <li><a href="/produtos?categoria=ponte">Ponte / Nut</a></li>
            <li><a href="/produtos?categoria=trastes">Trastes</a></li>
            <li><a href="/produtos?categoria=escudos">Escudos</a></li>
            <li><a href="/produtos?categoria=tarraxas">Tarraxas</a></li>
          </ul>
        </div>

        <!-- Coluna 4 -->
        <div class="coluna">
          <h3>Mais Buscados</h3>
          <ul>
            <li><a href="/produtos?categoria=tagima-stratocaster">Tagima Stratocaster</a></li>
            <li><a href="/produtos?categoria=giannini-classico">Giannini Clássico</a></li>
            <li><a href="/produtos?categoria=fender-telecaster">Fender Telecaster</a></li>
            <li><a href="/produtos?categoria=gibson-lespaul">Gibson Les Paul</a></li>
            <li><a href="/produtos?categoria=yamaha-c40">Yamaha C40</a></li>
            <li><a href="/produtos?categoria=tagima-dallas">Tagima Dallas</a></li>
            <li><a href="/produtos?categoria=michael-vm925">Michael VM925</a></li>
            <li><a href="/produtos?categoria=ibanez-rg">Ibanez RG</a></li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</nav>

<script>
  const abrirPainelBtn = document.getElementById("btn-corda");
  const painel = document.getElementById("painel-filtro");
  const fecharBtn = document.querySelector(".fechar-filtro");

  abrirPainelBtn.addEventListener("click", (e) => {
    e.preventDefault();
    painel.classList.toggle("ativo");
  });

  fecharBtn.addEventListener("click", () => {
    painel.classList.remove("ativo");
  });
</script>

<script>
  const icone = document.getElementById("iconeLoja");
  const dropdown = document.getElementById("dropdownMenu");

  if (icone && dropdown) {
    icone.addEventListener("click", () => {
      dropdown.style.display = dropdown.style.display === "block" ? "none" : "block";
    });

    document.addEventListener("click", (e) => {
      if (!icone.contains(e.target) && !dropdown.contains(e.target)) {
        dropdown.style.display = "none";
      }
    });
  }
</script>



